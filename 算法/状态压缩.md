




## Trick

当需要预处理且卡空间时，可以考虑将状压数组滚动，按照 popcount 的大小去分割，空间复杂度 $O(C_{n}^{\frac{n}{2}})$ [# 信号传递](https://www.luogu.com.cn/problem/P6622)

当查询序列方案数，且序列是否合法只需要判断相邻两个元素时，可以考虑状压一个三进制数组表示某个元素 左右都没安排元素/左右有一侧安排了元素/左右都安排了元素 的方案数